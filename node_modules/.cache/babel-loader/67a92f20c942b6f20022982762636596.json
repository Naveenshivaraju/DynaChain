{"ast":null,"code":"var _jsxFileName = \"D:\\\\TCS\\\\DynaChain\\\\dynachain\\\\dynachain-master\\\\dynachain\\\\src\\\\Demand\\\\Components\\\\CircularBarPlot\\\\StackedCircular.js\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport * as d3 from 'd3';\n\nfunction StackedCircular() {\n  const width = 975;\n  const height = 975;\n  const innerRadius = 180;\n  const outerRadius = Math.min(width, height) / 2;\n  data = d3.csvParse(\n  /* await */\n  FileAttachment(\"data-2.csv\").text(), (d, _, columns) => {\n    let total = 0;\n\n    for (let i = 1; i < columns.length; ++i) total += d[columns[i]] = +d[columns[i]];\n\n    d.total = total;\n    return d;\n  });\n  const [data, setData] = useState(data);\n  const svgRef = useRef();\n  useEffect(() => {\n    const svg = d3.select(svgRef.current).attr(\"viewBox\", `${-width / 2} ${-height / 2} ${width} ${height}`).style(\"width\", \"100%\").style(\"height\", \"auto\").style(\"font\", \"10px sans-serif\");\n    const arc = d3.arc().innerRadius(d => y(d[0])).outerRadius(d => y(d[1])).startAngle(d => x(d.data.State)).endAngle(d => x(d.data.State) + x.bandwidth()).padAngle(0.01).padRadius(innerRadius);\n    const y = d3.scaleRadial().domain([0, d3.max(data, d => d.total)]).range([innerRadius, outerRadius]);\n    const z = d3.scaleOrdinal().domain(data.columns.slice(1)).range([\"#98abc5\", \"#8a89a6\", \"#7b6888\", \"#6b486b\", \"#a05d56\", \"#d0743c\", \"#ff8c00\"]);\n\n    const xAxis = g => g.attr(\"text-anchor\", \"middle\").call(g => g.selectAll(\"g\").data(data).join(\"g\").attr(\"transform\", d => `\n                    rotate(${(x(d.State) + x.bandwidth() / 2) * 180 / Math.PI - 90})\n                    translate(${innerRadius},0)\n                `).call(g => g.append(\"line\").attr(\"x2\", -5).attr(\"stroke\", \"#000\")).call(g => g.append(\"text\").attr(\"transform\", d => (x(d.State) + x.bandwidth() / 2 + Math.PI / 2) % (2 * Math.PI) < Math.PI ? \"rotate(90)translate(0,16)\" : \"rotate(-90)translate(0,-9)\").text(d => d.State)));\n\n    const yAxis = g => g.attr(\"text-anchor\", \"middle\").call(g => g.append(\"text\").attr(\"y\", d => -y(y.ticks(5).pop())).attr(\"dy\", \"-1em\").text(\"Population\")).call(g => g.selectAll(\"g\").data(y.ticks(5).slice(1)).join(\"g\").attr(\"fill\", \"none\").call(g => g.append(\"circle\").attr(\"stroke\", \"#000\").attr(\"stroke-opacity\", 0.5).attr(\"r\", y)).call(g => g.append(\"text\").attr(\"y\", d => -y(d)).attr(\"dy\", \"0.35em\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 5).text(y.tickFormat(5, \"s\")).clone(true).attr(\"fill\", \"#000\").attr(\"stroke\", \"none\")));\n\n    const legend = g => g.append(\"g\").selectAll(\"g\").data(data.columns.slice(1).reverse()).join(\"g\").attr(\"transform\", (d, i) => `translate(-40,${(i - (data.columns.length - 1) / 2) * 20})`).call(g => g.append(\"rect\").attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", z)).call(g => g.append(\"text\").attr(\"x\", 24).attr(\"y\", 9).attr(\"dy\", \"0.35em\").text(d => d));\n\n    svg.append(\"g\").selectAll(\"g\").data(d3.stack().keys(data.columns.slice(1))(data)).join(\"g\").attr(\"fill\", d => z(d.key)).selectAll(\"path\").data(d => d).join(\"path\").attr(\"d\", arc);\n    svg.append(\"g\").call(xAxis);\n    svg.append(\"g\").call(yAxis);\n    svg.append(\"g\").call(legend);\n  }, data);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '500px',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default StackedCircular;","map":{"version":3,"sources":["D:/TCS/DynaChain/dynachain/dynachain-master/dynachain/src/Demand/Components/CircularBarPlot/StackedCircular.js"],"names":["React","useRef","useEffect","useState","d3","StackedCircular","width","height","innerRadius","outerRadius","Math","min","data","csvParse","FileAttachment","text","d","_","columns","total","i","length","setData","svgRef","svg","select","current","attr","style","arc","y","startAngle","x","State","endAngle","bandwidth","padAngle","padRadius","scaleRadial","domain","max","range","z","scaleOrdinal","slice","xAxis","g","call","selectAll","join","PI","append","yAxis","ticks","pop","tickFormat","clone","legend","reverse","stack","keys","key"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport * as d3 from 'd3'\r\n\r\n\r\nfunction StackedCircular() {\r\n\r\n    const width = 975;\r\n    const height = 975;\r\n    const innerRadius = 180\r\n    const outerRadius = Math.min(width, height) / 2;\r\n\r\n    data = d3.csvParse(/* await */ FileAttachment(\"data-2.csv\").text(), (d, _, columns) => {\r\n        let total = 0;\r\n        for (let i = 1; i < columns.length; ++i) total += d[columns[i]] = +d[columns[i]];\r\n        d.total = total;\r\n        return d;\r\n      })\r\n\r\n    const [data, setData] = useState(data);\r\n    const svgRef = useRef();\r\n\r\n    useEffect(() => {\r\n\r\n        const svg = d3.select(svgRef.current)\r\n            .attr(\"viewBox\", `${-width / 2} ${-height / 2} ${width} ${height}`)\r\n            .style(\"width\", \"100%\")\r\n            .style(\"height\", \"auto\")\r\n            .style(\"font\", \"10px sans-serif\");\r\n\r\n        const arc = d3.arc()\r\n            .innerRadius(d => y(d[0]))\r\n            .outerRadius(d => y(d[1]))\r\n            .startAngle(d => x(d.data.State))\r\n            .endAngle(d => x(d.data.State) + x.bandwidth())\r\n            .padAngle(0.01)\r\n            .padRadius(innerRadius)\r\n\r\n        const y = d3.scaleRadial()\r\n            .domain([0, d3.max(data, d => d.total)])\r\n            .range([innerRadius, outerRadius])\r\n\r\n        const z = d3.scaleOrdinal()\r\n            .domain(data.columns.slice(1))\r\n            .range([\"#98abc5\", \"#8a89a6\", \"#7b6888\", \"#6b486b\", \"#a05d56\", \"#d0743c\", \"#ff8c00\"])\r\n\r\n        const xAxis = g => g\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .call(g => g.selectAll(\"g\")\r\n                .data(data)\r\n                .join(\"g\")\r\n                .attr(\"transform\", d => `\r\n                    rotate(${((x(d.State) + x.bandwidth() / 2) * 180 / Math.PI - 90)})\r\n                    translate(${innerRadius},0)\r\n                `)\r\n                .call(g => g.append(\"line\")\r\n                    .attr(\"x2\", -5)\r\n                    .attr(\"stroke\", \"#000\"))\r\n                .call(g => g.append(\"text\")\r\n                    .attr(\"transform\", d => (x(d.State) + x.bandwidth() / 2 + Math.PI / 2) % (2 * Math.PI) < Math.PI\r\n                        ? \"rotate(90)translate(0,16)\"\r\n                        : \"rotate(-90)translate(0,-9)\")\r\n                    .text(d => d.State)))\r\n\r\n\r\n        const yAxis = g => g\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .call(g => g.append(\"text\")\r\n                .attr(\"y\", d => -y(y.ticks(5).pop()))\r\n                .attr(\"dy\", \"-1em\")\r\n                .text(\"Population\"))\r\n            .call(g => g.selectAll(\"g\")\r\n                .data(y.ticks(5).slice(1))\r\n                .join(\"g\")\r\n                .attr(\"fill\", \"none\")\r\n                .call(g => g.append(\"circle\")\r\n                    .attr(\"stroke\", \"#000\")\r\n                    .attr(\"stroke-opacity\", 0.5)\r\n                    .attr(\"r\", y))\r\n                .call(g => g.append(\"text\")\r\n                    .attr(\"y\", d => -y(d))\r\n                    .attr(\"dy\", \"0.35em\")\r\n                    .attr(\"stroke\", \"#fff\")\r\n                    .attr(\"stroke-width\", 5)\r\n                    .text(y.tickFormat(5, \"s\"))\r\n                    .clone(true)\r\n                    .attr(\"fill\", \"#000\")\r\n                    .attr(\"stroke\", \"none\")))\r\n\r\n        const legend = g => g.append(\"g\")\r\n            .selectAll(\"g\")\r\n            .data(data.columns.slice(1).reverse())\r\n            .join(\"g\")\r\n                .attr(\"transform\", (d, i) => `translate(-40,${(i - (data.columns.length - 1) / 2) * 20})`)\r\n                .call(g => g.append(\"rect\")\r\n                    .attr(\"width\", 18)\r\n                    .attr(\"height\", 18)\r\n                    .attr(\"fill\", z))\r\n                .call(g => g.append(\"text\")\r\n                    .attr(\"x\", 24)\r\n                    .attr(\"y\", 9)\r\n                    .attr(\"dy\", \"0.35em\")\r\n                    .text(d => d))\r\n\r\n            \r\n        svg.append(\"g\")\r\n            .selectAll(\"g\")\r\n            .data(d3.stack().keys(data.columns.slice(1))(data))\r\n            .join(\"g\")\r\n            .attr(\"fill\", d => z(d.key))\r\n            .selectAll(\"path\")\r\n            .data(d => d)\r\n            .join(\"path\")\r\n            .attr(\"d\", arc);\r\n\r\n        svg.append(\"g\")\r\n            .call(xAxis);\r\n      \r\n        svg.append(\"g\")\r\n            .call(yAxis);\r\n      \r\n        svg.append(\"g\")\r\n            .call(legend);\r\n        \r\n\r\n    }, data);\r\n\r\n    return (\r\n        <div style={{ height: '500px', width: '100%' }}>\r\n            <svg ref={svgRef}></svg>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StackedCircular;\r\n"]},"metadata":{},"sourceType":"module"}